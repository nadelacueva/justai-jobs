<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ethical AI Jobs Marketplace</title>
  <link rel="stylesheet" href="/css/marketplace.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- jQuery for AJAX -->
</head>
<body>
  <!-- Navigation Bar -->
  <header class="navbar">
    <a href="home.html"><img src="/assets/logo.png" alt="Logo" class="logo"></a>
    <nav class="nav-links">
      <a href="index.html">Ethical AI Jobs</a>
      <a href="community.html">Connect & Grow</a>
      <a href="about.html">Who We Are</a>
      <a href="support-inquiries.html">Support & Inquiries</a>
      <a href="account-dashboard.html">Account Dashboard</a>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="container">
    <aside class="sidebar">
      <h3>Keywords</h3>
      <div class="filter-group">
        <label><input type="checkbox" checked> Hybrid</label>
        <label><input type="checkbox" checked> Full-time</label>
        <label><input type="checkbox" checked> Data Science</label>
      </div>

      <h4>Label</h4>
      <div class="filter-group">
        <label><input type="checkbox" checked> Label</label>
        <label><input type="checkbox" checked> Label</label>
        <label><input type="checkbox" checked> Label</label>
      </div>

      <h4>Color</h4>
      <div class="filter-group">
        <label><input type="checkbox"> Label</label>
        <label><input type="checkbox"> Label</label>
        <label><input type="checkbox"> Label</label>
      </div>

      <h4>Size</h4>
      <div class="filter-group">
        <label><input type="checkbox" checked> Label</label>
        <label><input type="checkbox" checked> Label</label>
        <label><input type="checkbox" checked> Label</label>
      </div>
    </aside>

    <section class="main-content">
      <div class="search-filter">
        <input type="text" id="search-bar" placeholder="Search" />
        <button class="filter-button active">New</button>
        <button class="filter-button">Most Applied</button>
        <button class="filter-button">Salary Descending</button>
        <button class="filter-button">Top-rated</button>
      </div>

      <div class="job-grid" id="job-grid">
        <!-- Job Cards will appear here after search -->
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-container">
      <div class="footer-column">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="#">Ethical AI Jobs</a></li>
          <li><a href="#">Connect & Grow</a></li>
          <li><a href="#">Who We Are</a></li>
          <li><a href="#">Support & Inquiries</a></li>
          <li><a href="#">FAQs</a></li>
          <li><a href="#">Blog</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>Let's Connect</h3>
        <ul>
          <li><a href="#">Quick Chat</a></li>
          <li><a href="#">Email</a></li>
          <li><a href="#">Phone</a></li>
          <li><a href="#">Address</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>Legal & Policies</h3>
        <ul>
          <li><a href="#">Privacy Policy</a></li>
          <li><a href="#">Terms of Service</a></li>
          <li><a href="#">Fair Hiring Commitment</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <script>
    $(document).ready(function() {
      // Handle search
      $('#search-bar').on('input', function() {
        var searchQuery = $(this).val();

        const BACKEND = "https://justai-backend.onrender.com"; // Replace with your actual backend URL

        // AJAX request to fetch jobs matching search query
        $.ajax({
          url: '${BACKEND}/api/jobs/search?query=${encodeURIComponent(searchQuery)}',  // Correct API endpoint for backend search
          type: 'GET',
          data: { query: searchQuery },
          success: function(response) {
            // Update the job grid with the results
            $('#job-grid').empty();  // Clear previous results
            if (response.jobs.length > 0) {
              response.jobs.forEach(function(job) {
                var jobCard = `<div class="job-card">
                                 <div class="image-placeholder"></div>
                                 <p>${job.title}</p>
                                 <strong>${job.salary}</strong>
                               </div>`;
                $('#job-grid').append(jobCard);
              });
            } else {
              $('#job-grid').append('<p>No jobs found</p>');
            }
          },
          error: function() {
            $('#job-grid').append('<p>Error fetching jobs</p>');
          }
        });
      });
    });
  </script>
</body>
</html>
